当前我遇到的问题是：
当我回退后，【智能对象：样本图层】虽然存在，但其同步机制会失灵，此时记录不会更新。
然后是点击应用后，会连续弹出两个报错窗口:
1.处理图层 【某某图层】 失败：undefined
2.应用调整失败：undefined

我选中的某一个图层会停留在转为智能对象这一步，后续的滤镜复制操作都没有顺利进行。
在历史记录上只能看到转为智能对象这一步。

至于UXP上也会有相同的错误。
FileArea.tsx:728 处理图层失败: Error: 未找到名为“样本图层”的智能对象 【某某图层】
FileArea.tsx:975 应用调整失败: Error: 未找到名为“样本图层”的智能对象。

这个问题是增加了FileArea.tsx以及DocumentInfoContext.tsx中的回退防御机制后才产生的。
在增加回退防御机制前，出现的问题是每次回退会导致面板无法渲染：
uxp://uxp-internal/domjs_scripts.js:2 Uncaught Error: The 图层 with an id of 680 does not exist.at validateLayer (uxp://uxp-internal/ps-app.js:1)

而增加防御机制后，上述面板无法渲染的问题解决了，但带来了新问题：初次点击应用，随后回退后，无法再次使用应用的问题。回退后同步机制失效。

我下意识认为这是由于现在的文件上下文的逻辑以及回退需要优化一下。

点击应用以及回退后，都应该刷新文件树的状态，确保能正确地开展后续的操作。
而点击回退时，需要增加强制触发同步左侧记录列表与【智能对象：样本图层】中的智能滤镜。

之前，你尝试通过get获取样本图层的图层ID，替换当前获取样本图层的手段，但是这个思路仍然无效，相反频繁的get API会让PS不停地弹出获取图层失败的报错，因此这个思路不可行。
